@using Syncfusion.Blazor.SplitButtons
@inject ThemeService ThemeService

<SfDropDownButton CssClass="@ButtonCss">
    <Syncfusion.Blazor.Buttons.SfIcon IconCss="e-icons e-menu"/>
    <DropDownMenuItems>
        <DropDownMenuItem Text="Export As Image" IconCss="e-icons e-export" Id="export-image" />
        <DropDownMenuItem Text="Rotate Layout" IconCss="e-icons e-refresh" Id="rotate-layout" />
        <DropDownMenuItem 
            Text="@(IsGraphCollapsed ? "Expand Graph" : "Collapse Graph")" 
            IconCss="@(IsGraphCollapsed ? "e-icons e-expand" : "e-icons e-collapse-2")" 
            Id="expand-graph" 
        />
    </DropDownMenuItems>
    <DropDownButtonEvents ItemSelected="OnHamburgerMenuItemClick" />
</SfDropDownButton>

@code {
    private string ButtonCss = "e-caret-hide hamburger-btn light";

    [Parameter] public EventCallback<string> OnHamburgerMenuAction { get; set; }

    [Parameter] public bool IsGraphCollapsed { get; set; } = false;

    protected override void OnInitialized()
    {
        ThemeService.OnThemeChanged += HandleThemeChanged;
    }

    private void HandleThemeChanged()
    {
        ButtonCss = $"e-caret-hide hamburger-btn {ThemeService.CurrentTheme}";
        InvokeAsync(StateHasChanged);
    }

    private async Task OnHamburgerMenuItemClick(MenuEventArgs args)
    {
        if (string.IsNullOrWhiteSpace(args.Item.Id))
            return;

        await OnHamburgerMenuAction.InvokeAsync(args.Item.Id);
    }


}

<style>
    .hamburger-btn {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 100;
        border-radius: 3px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .hamburger-btn.e-dropdown-btn,
    .hamburger-btn.e-dropdown-btn.e-btn {
        border: none;
    }

    .hamburger-btn.light{
        background: #343A401A;
    }
    
    .hamburger-btn.dark{
        background: #3A3A3A;
    }

    .hamburger-btn.e-dropdown-popup ul{
        border: none;
    }

    .hamburger-btn .e-icons {
        font-size: 16px;
    }

</style>
